<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${action == 'edit'} ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ' : '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ'">–§–æ—Ä–º–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <header>
        <h1 th:text="${action == 'edit'} ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ' : '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ'">–§–æ—Ä–º–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</h1>
        <p class="subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ</p>
    </header>

    <!--–ù–∞–≤–∏–≥–∞—Ü–∏—è-->
    <div class="navigation">
        <a th:href="@{/availableEquipments}" class="nav-link">üìã –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</a>
        <a th:href="@{/rentalPoints}" class="nav-link">üè™ –ü—É–Ω–∫—Ç—ã –ø—Ä–æ–∫–∞—Ç–∞</a>
        <a th:href="@{/equipmentTypes}" class="nav-link">üèãÔ∏è‚Äç‚ôÇÔ∏è –¢–∏–ø—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</a>
    </div>

    <!--–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö-->
    <div th:if="${errorMessage}" class="alert alert-error">
        <span th:text="${errorMessage}"></span>
    </div>

    <div class="form-container">
        <form th:action="${action == 'edit'} ?
                         @{/availableEquipments/update/{id}(id=${availableEquipment.availableId})} :
                         @{/availableEquipments}"
              th:object="${availableEquipment}"
              method="post"
              class="available-equipment-form">
            <!--–ü—É–Ω–∫—Ç –ø—Ä–æ–∫–∞—Ç–∞-->
            <div class="form-group">
                <label for="rentalPoint">–ü—É–Ω–∫—Ç –ø—Ä–æ–∫–∞—Ç–∞ <span class="required">*</span></label>
                <select id="rentalPoint"
                        th:field="*{rentalPoint}"
                        th:classappend="${#fields.hasErrors('rentalPoint')} ? 'error' : ''"
                        required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –ø—Ä–æ–∫–∞—Ç–∞</option>
                    <option th:each="point : ${rentalPoints}"
                            th:value="${point.id}"
                            th:text="${point.pointName} + ' (' + point.location + ')'"
                            th:selected="${availableEquipment.rentalPoint != null && availableEquipment.rentalPoint.id == point.id}">
                    </option>
                </select>
                <span class="error-message" th:if="${#fields.hasErrors('rentalPoint')}"
                      th:errors="*{rentalPoint}"></span>
            </div>

            <!--–¢–∏–ø –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è-->
            <div class="form-group">
                <label for="equipmentType">–¢–∏–ø –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è <span class="required">*</span></label>
                <select id="equipmentType"
                        th:field="*{equipmentType}"
                        th:classappend="${#fields.hasErrors('equipmentType')} ? 'error' : ''"
                        required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</option>
                    <option th:each="type : ${equipmentTypes}"
                            th:value="${type.id}"
                            th:text="${type.typeName} + ' (' + type.category + ')'"
                            th:selected="${availableEquipment.equipmentType != null && availableEquipment.equipmentType.id == type.id}">
                    </option>
                </select>
                <span class="error-message" th:if="${#fields.hasErrors('equipmentType')}"
                      th:errors="*{equipmentType}"></span>
            </div>


            <!--–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ-->
            <div class="form-group">
                <label for="totalCount">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ <span class="required">*</span></label>
                <input type="number"
                       id="totalCount"
                       th:field="*{totalCount}"
                       placeholder="0"
                       th:classappend="${#fields.hasErrors('totalCount')} ? 'error' : ''"
                       min="0"
                       required>
                <span class="error-message" th:if="${#fields.hasErrors('totalCount')}"
                      th:errors="*{totalCount}"></span>
            </div>

            <!--–î–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ-->
            <div class="form-group">
                <label for="availableCount">–î–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>

                <input type="number"
                       id="availableCount"
                       th:field="*{availableCount}"
                       placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è"
                       th:classappend="${#fields.hasErrors('availableCount')} ? 'error' : ''"
                       min="0"
                       th:attr="max=${availableEquipment.totalCount}">

                <span class="error-message" th:if="${#fields.hasErrors('availableCount')}"
                      th:errors="*{availableCount}"></span>

                <div class="form-hint">
        <span th:if="${action == 'create'}">
            –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É (<span th:text="${availableEquipment.totalCount}">0</span>)
        </span>
                    <span th:if="${action == 'edit'}">
            –ù–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: <span th:text="${availableEquipment.totalCount}">0</span>
        </span>
                </div>
            </div>

            <!--–°—Ç–æ–∏–º–æ—Å—Ç—å-->
            <div class="form-group">
                <label for="cost">–°—Ç–æ–∏–º–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã (—Ä—É–±./—á–∞—Å) <span class="required">*</span></label>
                <input type="number"
                       id="cost"
                       th:field="*{cost}"
                       placeholder="100"
                       th:classappend="${#fields.hasErrors('cost')} ? 'error' : ''"
                       min="1"
                       required>
                <span class="error-message" th:if="${#fields.hasErrors('cost')}"
                      th:errors="*{cost}"></span>
            </div>

            <!--–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π-->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-large">
                    <span th:text="${action == 'edit'} ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è' : '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ'"></span>
                </button>
                <a th:href="@{/availableEquipments}" class="btn btn-secondary btn-large">–û—Ç–º–µ–Ω–∞</a>
            </div>

            <p class="form-note"><span class="required">*</span> –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</p>
        </form>
    </div>
</div>
</body>
</html>